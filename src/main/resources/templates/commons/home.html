<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layouts :: header">

<body>
	<nav th:replace="layouts :: navbar"></nav>
	<div class="container bg-white">
		<div class="row">
			<div class="col-md-7">
				<h3 style="text-align: center;color: white;margin-top:6px;" class="bg-dark mt-10">Project List</h3>

				<table class="table table-hover">
					<thead>
						<tr>
							<th>Project Name</th>
							<th>Stage</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="proj : ${projList}">

							<td th:text="${proj.name}" />
							<td th:text="${proj.stage}" />
							<td th:text="${proj.description}" />

						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-md-5">
			   <canvas id="pie-chart" width="50" height="50"></canvas>
			</div>
		</div>
	</div>
	
	<div class="container bg-white">
		<div class="row">
			<div class="col-md-7">

				<h3 style="text-align: center;color: white;margin-top:6px;" class="bg-dark mt-10">Employee List</h3>

				<table class="table table-hover">
					<thead>
						<tr>
							<th>Employee Name</th>
							<th>Email Id</th>
							<th>Number Of Project Assingned</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="empl : ${empProjList}">

							<td th:text="${empl.empName}" />
							<td th:text="${empl.email}" />
							<td th:text="${empl.projCount}" />

						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</div>

</body>
<script>
var data = $('<div>').html('[[${empProjectListForChart}]]')[0].innerText;

var jsonData = JSON.parse(data);

var LabelList = [];
var valueList = [];

for(var i=0;i<jsonData.length;i++){
	LabelList.push(jsonData[i].label);
	valueList.push(jsonData[i].value);
}

</script>
<script th:src="@{js/home.js}"></script>

</html>